<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Details</title>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f5f5f5;
}

/* ===== HEADER ===== */
.header{
  padding:12px;
  background:#d32f2f;
  color:#fff;
  font-size:18px;
}

/* ===== CONTAINER ===== */
.container{
  padding:12px;
}

/* ===== IMAGE BOX ===== */
#imgBox img{
  width:100%;
  border-radius:8px;
}

/* ===== PRODUCT INFO ===== */
.card{
  background:#fff;
  padding:12px;
  border-radius:8px;
  margin-top:12px;
}

.offer{
  background:#d32f2f;
  color:#fff;
  display:inline-block;
  padding:4px 8px;
  border-radius:4px;
  font-size:13px;
  margin-bottom:6px;
}

.old-price{
  text-decoration:line-through;
  color:#777;
  font-size:14px;
}

.new-price{
  color:#2e7d32;
  font-size:20px;
  font-weight:bold;
}

.badge{
  font-size:14px;
  color:#555;
  margin-top:6px;
}

/* ===== BUTTONS ===== */
.btn-row{
  display:flex;
  gap:10px;
  margin-top:15px;
}

.btn{
  flex:1;
  padding:12px;
  border:none;
  border-radius:6px;
  font-size:16px;
  cursor:pointer;
}

.cart-btn{
  background:#ff9800;
  color:#000;
}

.buy-btn{
  background:#2e7d32;
  color:#fff;
}
</style>
</head>

<body>

<div class="header">Product Details</div>

<div class="container">

  <!-- PRODUCT IMAGES -->
  <div id="imgBox"></div>

  <!-- PRODUCT DETAILS -->
  <div class="card">
    <div id="off" class="offer"></div>

    <h2 id="pname"></h2>

    <div class="old-price" id="op"></div>
    <div class="new-price" id="fp"></div>

    <p id="desc"></p>

    <div class="badge"><b>Category:</b> <span id="cat"></span></div>
    <div class="badge"><b>Return:</b> <span id="ret"></span></div>
    <div class="badge"><b>Warranty:</b> <span id="war"></span></div>

    <div class="btn-row">
      <button class="btn cart-btn" onclick="addCart()">Add to Cart</button>
      <button class="btn buy-btn" onclick="buyNow()">Buy Now</button>
    </div>
  </div>

</div>

<script>
let products = JSON.parse(localStorage.getItem("products") || "[]");
let cart = JSON.parse(localStorage.getItem("cart") || []);

let id = localStorage.getItem("viewProduct");
let p = products.find(x => String(x.id) === String(id));

if (!p) {
  document.body.innerHTML = "<h2 style='text-align:center;margin-top:40px'>Product not found</h2>";
} else {

  /* ===== IMAGES ===== */
  if (p.images && p.images.length > 0) {
    imgBox.innerHTML = "";
    p.images.forEach(img => {
      imgBox.innerHTML += `
        <img src="${img}" style="margin-bottom:10px">
      `;
    });
  }

  /* ===== DETAILS ===== */
  pname.innerText = p.name || "";
  desc.innerText = p.desc || "";

  op.innerText = "₹" + p.price;
  fp.innerText = "₹" + p.finalPrice;

  off.innerText = p.offer ? p.offer + "% OFF" : "";
  if(!p.offer) off.style.display="none";

  cat.innerText = p.category || "";

  ret.innerText = (p.return === "yes")
    ? "Return in " + (p.returnDays || "") + " days"
    : "No Return";

  war.innerText = (p.warranty === "yes")
    ? (p.warrantyTime || "")
    : "No Warranty";
}

/* ===== ADD TO CART ===== */
function addCart(){
  cart.push(p);
  localStorage.setItem("cart", JSON.stringify(cart));
  alert("Added to cart");
}

/* ===== BUY NOW (WHATSAPP) ===== */
function buyNow(){
  let msg = `Order Details:%0A
Product: ${p.name}%0A
Price: ₹${p.finalPrice}%0A
Category: ${p.category}%0A`;

  window.open(
    "https://wa.me/919296466519?text=" + msg,
    "_blank"
  );
}
</script>

</body>
</html>
